---
layout: "base.njk"
title: "Sign up"
---

<div class="feedback"></div>

<form class="sign-up" action="/.netlify/functions/submit" method="post">
    <label for="name">
        Name *
        <input class="field" type="text" name="name" required>
    </label>
    <label for="name">
        URL *
        <input class="field" type="text" name="url" required>
    </label>
    <label for="type" class="full-width select">What type of review?
        <select class="field" name="type" id="">
            <option value="Code Review">Code Review</option>
            <option value="Design Review">Design Review</option>
            <option value="Resume Review">Resum√© Review</option>
        </select>
    </label>
    
    <label for="name">
        Social Media:
        <input class="field" type="text" name="social">
    </label>
    <label for="email">
        Email *
        <input class="field" type="email" name="email" required>
    </label>
    <label for="description" class="full-width">
        Additional Info:
        <textarea class="field full-width" name="description" id="" cols="50" rows="10"></textarea>
    </label>

    <button type="submit">Send your info</button>
</form>



<script>
function ajaxSuccess() {
    console.log('success');
}
const formToJSON = elements => [].reduce.call(elements, (data, element) => {

  data[element.name] = element.value;
  return data;

}, {});


function postData(url = '', data = {}, form = '') {
  // Default options are marked with *
    return fetch(url, {
        method: 'POST', // *GET, POST, PUT, DELETE, etc.
        mode: 'cors', // no-cors, cors, *same-origin
        cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
        credentials: 'same-origin', // include, *same-origin, omit
        headers: {
            'Content-Type': 'application/json',
            // 'Content-Type': 'application/x-www-form-urlencoded',
        },
        redirect: 'follow', // manual, *follow, error
        referrer: 'no-referrer', // no-referrer, *client
        body: JSON.stringify(data), // body data type must match "Content-Type" header
    })
    .then(response => {
        console.log(response);
        let feedbackArea = document.querySelector('.feedback');
        feedbackArea.classList.add(`${status = 200 ? "success" : "failure"}`);
        feedbackArea.innerHTML = `<p class="success">${status = 200 ? "We've got it added to the list!" : "Something went wrong"}`
        form.reset();
        console.log(response.body);

    }); // parses JSON response into native Javascript objects 
}
(() => {
    const form = document.querySelector('.sign-up');
    form.addEventListener('submit', e => {
        const form = e.currentTarget;
        e.preventDefault();
        const formData = formToJSON(form.elements);
        postData(form.action, formData, form);
    });

})();

</script>